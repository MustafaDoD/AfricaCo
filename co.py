import random
from telegram import Update
from telegram.ext import Application, CommandHandler, MessageHandler, filters, CallbackContext

countries_capitals = {
    "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±": "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±",
    "Ø£Ù†ØºÙˆÙ„Ø§": "Ù„ÙˆØ§Ù†Ø¯Ø§",
    "Ø¨Ù†ÙŠÙ†": "Ø¨ÙˆØ±ØªÙˆ Ù†ÙˆÙÙˆ",
    "Ø¨ÙˆØªØ³ÙˆØ§Ù†Ø§": "ØºØ§Ø¨ÙˆØ±ÙˆÙ†",
    "Ø¨ÙˆØ±ÙƒÙŠÙ†Ø§ ÙØ§Ø³Ùˆ": "ÙˆØ§ØºØ§Ø¯ÙˆØºÙˆ",
    "Ø¨ÙˆØ±ÙˆÙ†Ø¯ÙŠ": "Ø¨ÙˆØ¬Ù…Ø¨ÙˆØ±Ø§",
    "Ø§Ù„Ø±Ø£Ø³ Ø§Ù„Ø£Ø®Ø¶Ø±": "Ø¨Ø±Ø§ÙŠØ§",
    "Ø§Ù„ÙƒØ§Ù…ÙŠØ±ÙˆÙ†": "ÙŠØ§ÙˆÙ†Ø¯ÙŠ",
    "Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© Ø£ÙØ±ÙŠÙ‚ÙŠØ§ Ø§Ù„ÙˆØ³Ø·Ù‰": "Ø¨Ø§Ù†ØºÙŠ",
    "ØªØ´Ø§Ø¯": "Ù†Ø¬Ø§Ù…ÙŠÙ†Ø§",
    "Ø¬Ø²Ø± Ø§Ù„Ù‚Ù…Ø±": "Ù…ÙˆØ±ÙˆÙ†ÙŠ",
    "Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© Ø§Ù„ÙƒÙˆÙ†ØºÙˆ Ø§Ù„Ø¯ÙŠÙ…Ù‚Ø±Ø§Ø·ÙŠØ©": "ÙƒÙŠÙ†Ø´Ø§Ø³Ø§",
    "Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© Ø§Ù„ÙƒÙˆÙ†ØºÙˆ": "Ø¨Ø±Ø§Ø²Ø§ÙÙŠÙ„",
    "Ø¬ÙŠØ¨ÙˆØªÙŠ": "Ø¬ÙŠØ¨ÙˆØªÙŠ",
    "Ù…ØµØ±": "Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©",
    "ØºÙŠÙ†ÙŠØ§ Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©": "Ù…Ø§Ù„Ø§Ø¨Ùˆ",
    "Ø¥Ø±ÙŠØªØ±ÙŠØ§": "Ø§Ø³Ù…Ø±Ø©",
    "Ø¥Ø³ÙˆØ§ØªÙŠÙ†ÙŠ": "Ù…Ø¨Ø§Ø¨Ø§Ù†",
    "Ø¥Ø«ÙŠÙˆØ¨ÙŠØ§": "Ø§Ø¯ÙŠØ³ Ø§Ø¨Ø§Ø¨Ø§",
    "Ø§Ù„ØºØ§Ø¨ÙˆÙ†": "Ù„ÙŠØ¨Ø±ÙÙŠÙ„",
    "ØºØ§Ù…Ø¨ÙŠØ§": "Ø¨Ø§Ù†Ø¬ÙˆÙ„",
    "ØºØ§Ù†Ø§": "Ø§ÙƒØ±Ø§",
    "ØºÙŠÙ†ÙŠØ§": "ÙƒÙˆÙ†Ø§ÙƒØ±ÙŠ",
    "ØºÙŠÙ†ÙŠØ§ Ø¨ÙŠØ³Ø§Ùˆ": "Ø¨ÙŠØ³Ø§Ùˆ",
    "ÙƒÙˆØª Ø¯ÙŠÙÙˆØ§Ø±": "ÙŠØ§Ù…ÙˆØ³ÙˆÙƒØ±Ùˆ",
    "ÙƒÙŠÙ†ÙŠØ§": "Ù†ÙŠØ±ÙˆØ¨ÙŠ",
    "Ù„ÙŠØ³ÙˆØªÙˆ": "Ù…Ø§Ø³ÙŠØ±Ùˆ",
    "Ù„ÙŠØ¨ÙŠØ±ÙŠØ§": "Ù…ÙˆÙ†Ø±ÙˆÙÙŠØ§",
    "Ù„ÙŠØ¨ÙŠØ§": "Ø·Ø±Ø§Ø¨Ù„Ø³",
    "Ù…Ø¯ØºØ´Ù‚Ø±": "Ø§Ù†ØªØ§Ù†Ø§Ù†Ø§Ø±ÙŠÙÙˆ",
    "Ù…Ù„Ø§ÙˆÙŠ": "Ù„ÙŠÙ„ÙˆÙ†ØºÙˆÙŠ",
    "Ù…Ø§Ù„ÙŠ": "Ø¨Ø§Ù…Ø§ÙƒÙˆ",
    "Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§": "Ù†ÙˆØ§ÙƒØ´ÙˆØ·",
    "Ù…ÙˆØ±ÙŠØ´ÙŠÙˆØ³": "Ø¨ÙˆØ±Øª Ù„ÙˆÙŠØ³",
    "Ø§Ù„Ù…ØºØ±Ø¨": "Ø§Ù„Ø±Ø¨Ø§Ø·",
    "Ù…ÙˆØ²Ù…Ø¨ÙŠÙ‚": "Ù…Ø§Ø¨ÙˆØªÙˆ",
    "Ù†Ø§Ù…ÙŠØ¨ÙŠØ§": "ÙˆÙŠÙ†Ø¯Ù‡ÙˆÙƒ",
    "Ø§Ù„Ù†ÙŠØ¬Ø±": "Ù†ÙŠØ§Ù…ÙŠ",
    "Ù†ÙŠØ¬ÙŠØ±ÙŠØ§": "Ø§Ø¨ÙˆØ¬Ø§",
    "Ø±ÙˆØ§Ù†Ø¯Ø§": "ÙƒÙŠØºØ§Ù„ÙŠ",
    "Ø³Ø§Ùˆ ØªÙˆÙ…ÙŠ ÙˆØ¨Ø±ÙŠÙ†Ø³ÙŠØ¨": "Ø³Ø§Ùˆ ØªÙˆÙ…ÙŠ",
    "Ø§Ù„Ø³Ù†ØºØ§Ù„": "Ø¯Ø§ÙƒØ§Ø±",
    "Ø³ÙŠØ´Ù„": "ÙÙŠÙƒØªÙˆØ±ÙŠØ§",
    "Ø³ÙŠØ±Ø§Ù„ÙŠÙˆÙ†": "ÙØ±ÙŠØªØ§ÙˆÙ†",
    "Ø§Ù„ØµÙˆÙ…Ø§Ù„": "Ù…Ù‚Ø¯ÙŠØ´Ùˆ",
    "Ø¬Ù†ÙˆØ¨ Ø£ÙØ±ÙŠÙ‚ÙŠØ§": "Ø¨Ø±ÙŠØªÙˆØ±ÙŠØ§",
    "Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø³ÙˆØ¯Ø§Ù†": "Ø¬ÙˆØ¨Ø§",
    "Ø§Ù„Ø³ÙˆØ¯Ø§Ù†": "Ø§Ù„Ø®Ø±Ø·ÙˆÙ…",
    "ØªÙ†Ø²Ø§Ù†ÙŠØ§": "Ø¯ÙˆØ¯ÙˆÙ…Ø§",
    "ØªÙˆØºÙˆ": "Ù„ÙˆÙ…ÙŠ",
    "ØªÙˆÙ†Ø³": "ØªÙˆÙ†Ø³ Ø§Ù„Ø¹Ø§ØµÙ…Ø©",
    "Ø£ÙˆØºÙ†Ø¯Ø§": "ÙƒÙ…Ø¨Ø§Ù„Ø§",
    "Ø²Ø§Ù…Ø¨ÙŠØ§": "Ù„ÙˆØ³Ø§ÙƒØ§",
    "Ø²ÙŠÙ…Ø¨Ø§Ø¨ÙˆÙŠ": "Ù‡Ø±Ø§Ø±ÙŠ"
}

# ÙˆØ¸ÙŠÙØ© Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø¨ÙˆØª
async def start(update: Update, context: CallbackContext) -> None:
    await update.message.reply_text('Ù‡Ù„Ùˆ! Ø§Ø±Ø³Ù„ÙŠ "Ø§ÙØ±ÙŠÙ‚ÙŠØ§" Ø¹Ø´Ø§Ù† ØªØ¨Ø¯ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠ â€¢-â€¢.')

# ÙˆØ¸ÙŠÙØ© Ù„Ù„ØªØ­Ø¯ÙŠ
async def africa(update: Update, context: CallbackContext) -> None:
    country = random.choice(list(countries_capitals.keys()))
    context.user_data['country'] = country
    await update.message.reply_text(f'Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© {country}?')

# ÙˆØ¸ÙŠÙØ© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
async def check_answer(update: Update, context: CallbackContext) -> None:
    country = context.user_data.get('country')
    if country:
        capital = countries_capitals[country]
        if update.message.text == capital:
            await update.message.reply_text('ØµØ­ÙŠÙŠÙŠÙŠØ­ ØªØ±Ø±Ø¨ÙŠÙŠÙŠØªÙŠğŸ˜¼!')
        else:
            await update.message.reply_text(f'Ù†ÙˆÙˆÙˆØ¨ Ø®Ø·Ø£. Ø§Ù„Ø¹Ø§ØµÙ…Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ {capital}.')
        del context.user_data['country']
    else:
        await update.message.reply_text('Ø§Ø±Ø³Ù„ÙŠ "Ø§ÙØ±ÙŠÙ‚ÙŠØ§" Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠ.')

def main() -> None:
    application = Application.builder().token("7154304328:AAFXIXAGxQG9b8Myu9U4HygI_T2BDSEoTJI").build()
    
    application.add_handler(CommandHandler("start", start))
    application.add_handler(MessageHandler(filters.Regex(r'^Ø§ÙØ±ÙŠÙ‚ÙŠØ§$'), africa))
    application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, check_answer))
    
    application.run_polling()

if __name__ == '__main__':
    main()
